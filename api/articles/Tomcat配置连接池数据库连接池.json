{"title":"eclipse用JDBC链接数据库","slug":"Tomcat配置连接池数据库连接池","date":"2019-11-10T09:50:07.000Z","updated":"2019-11-10T10:12:04.875Z","comments":true,"excerpt":"","content":"<p>Tomcat6的服务器配置文件放在 ${tomcat6}/conf 目录底下。我们可以在这里找到 server.xml 和 context.xml。当然，还有其他一些资源文件。但是在在本文中我们只用得上这两个，其他的就不介绍了。 </p>\n<h2 id=\"1-添加jar包\"><a href=\"#1-添加jar包\" class=\"headerlink\" title=\"1.添加jar包\"></a>1.添加jar包</h2><p>首先，将数据库的驱动程序copy到tomcat8.0\\lib下，这一部是关键，如果没有copy 当运行程序的时候后报-找不到驱动-的异常。</p>\n<h2 id=\"2-在context文件中添加\"><a href=\"#2-在context文件中添加\" class=\"headerlink\" title=\"2.在context文件中添加\"></a>2.在context文件中添加</h2><p>将下面的代码放到Tomcat 8.0\\conf\\context.xml中间，如：</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;Context reloadable=<span class=\"string\">\"true\"</span>&gt;</span><br><span class=\"line\">&lt;Resource </span><br><span class=\"line\">name=<span class=\"string\">\"jdbc/数据库名\"</span></span><br><span class=\"line\">type=<span class=\"string\">\"javax.sql.DataSource\"</span></span><br><span class=\"line\">maxActive=<span class=\"string\">\"100\"</span></span><br><span class=\"line\">maxIdle=<span class=\"string\">\"30\"</span> </span><br><span class=\"line\">maxWait=<span class=\"string\">\"5000\"</span></span><br><span class=\"line\">username=<span class=\"string\">\"用户名\"</span></span><br><span class=\"line\">password=<span class=\"string\">\"密码\"</span></span><br><span class=\"line\">driverClassName=<span class=\"string\">\"数据库的驱动\"</span></span><br><span class=\"line\">url=<span class=\"string\">\"数据库的连接地址\"</span> /&gt;</span><br><span class=\"line\">&lt;/Context&gt;</span><br></pre></td></tr></table></figure>\n\n<p>也可以在项目root下的WEB-INF下新建context.xml进行配置</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"UTF-8\"</span>?&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;Context&gt;<span class=\"comment\">/////直连 </span></span><br><span class=\"line\">&lt;Resource </span><br><span class=\"line\">name=<span class=\"string\">\"jdbc/book\"</span> </span><br><span class=\"line\">type=<span class=\"string\">\"javax.sql.DataSource\"</span> </span><br><span class=\"line\">password=<span class=\"string\">\"\"</span></span><br><span class=\"line\">driverClassName=<span class=\"string\">\"com.microsoft.jdbc.sqlserver.SQLServerDriver\"</span></span><br><span class=\"line\">maxIdle=<span class=\"string\">\"5\"</span> </span><br><span class=\"line\">maxWait=<span class=\"string\">\"5000\"</span></span><br><span class=\"line\">username=<span class=\"string\">\"sa\"</span> </span><br><span class=\"line\">url=<span class=\"string\">\"jdbc:microsoft:sqlserver://localhost:1433;databaseName=book\"</span><span class=\"comment\">////直连数据源 maxActive=\"10\"/&gt; </span></span><br><span class=\"line\">&lt;/Context&gt;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-通过JNDI资源链接\"><a href=\"#3-通过JNDI资源链接\" class=\"headerlink\" title=\"3.通过JNDI资源链接\"></a>3.通过JNDI资源链接</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">InitialContext initCtx = <span class=\"keyword\">new</span> InitialContext();</span><br><span class=\"line\">DataSource ds = (DataSource)initCtx.lookup(<span class=\"string\">\"java:comp/env/jdbc/数据库名\"</span>);</span><br><span class=\"line\">Connection conn = ds.getConnection();</span><br></pre></td></tr></table></figure>\n\n<p>接下来就可以写一些对于数据库的操作啦 全局的context.xml配置可能会出一些问题 不确定因素</p>\n<p>（ps：懵 没有深入了解）</p>\n","categories":[],"tags":[]}